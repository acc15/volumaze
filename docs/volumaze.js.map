{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/util.ts","webpack:///./src/index.ts","webpack:///./src/maze.ts","webpack:///./src/mazegen.ts","webpack:///./src/mazedraw.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TWO_PI","Math","PI","Point","x","y","this","add","offset","toPoint","mul","val","div","center","copy","normSquare","norm","sqrt","normalize","polar","sin","cos","v","Array","isArray","Range","min","max","length","diff","step","between","inflate","deflate","makeInside","byStep","start","maze_1","mazedraw_1","util_1","canvas","document","getElementById","maze","generateMaze","width","height","keyMask","playerRadius","currentNode","rings","playerPosition","angle","radius","audio","capitalize","str","substring","toUpperCase","volume","window","onkeydown","e","play","onkeyup","forEach","k","btn","ontouchstart","onmousedown","ontouchend","onmouseleave","onmouseup","setInterval","playerRadiusRange","playerAngleDiff","acos","rightLink","getFirstLinkAt","leftLink","info","wall","to","upLink","directions","filter","link","downLink","requestAnimationFrame","onFrame","element","ctx","getContext","dim","clearRect","drawMaze","position","beginPath","pos","fillStyle","arc","fill","drawPlayer","drawFrame","mazegen_1","oppositeDirection","direction","floor","MazeNode","visited","linkTo","dir","node","getLinksTo","push","undefined","getFirstNodeAt","makeMazeRing","segmentCount","subdivisions","parent","segments","makeMazeRings","ringCount","maxSegmentArc","radiusRange","ceil","ringSubdivisions","backtraceCarve","stack","dirs","keys","flatMap","pop","chosenDirection","random","strokeStyle","stroke","rw","bw","styleRight","styleDown","pc","p1","p2","moveTo","lineTo","drawMazeWall","drawMazeNode"],"mappings":"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","file":"volumaze.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export const TWO_PI = 2 * Math.PI;\n\nexport type PointLike = Point | Array<number> | number\nexport class Point {\n    public x: number = 0;\n    public y: number = 0;\n\n    public constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n\n    public add(offset: PointLike): Point {\n        const p = Point.toPoint(offset);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n\n    public mul(val: PointLike): Point {\n        const p = Point.toPoint(val);\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    }\n\n    public div(val: PointLike): Point {\n        const p = Point.toPoint(val);\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    }\n\n    public center(): Point {\n        return this.div(2);\n    }\n\n    public copy(): Point {\n        return new Point(this.x, this.y);\n    }\n\n    public normSquare(): number {\n        return this.x * this.x + this.y * this.y;\n    }\n\n    public norm(): number {\n        return Math.sqrt(this.normSquare());\n    }\n\n    public normalize(): Point {\n        return this.x === 0 && this.y === 0 ? this : this.div(this.norm());\n    }\n\n    public polar(): Point {\n        const y = Math.sin(this.x) * this.y;\n        this.x = Math.cos(this.x) * this.y;\n        this.y = y;\n        return this;\n    }\n\n    public static toPoint(v: number | Array<number> | Point): Point {\n        if (typeof v === \"number\") {\n            return new Point(v, v);\n        } else if (Array.isArray(v)) {\n            return new Point(v[0], v[1]);\n        } else {\n            return v;\n        }\n    }\n\n}\n\nexport class Range {\n\n    public min: number;\n    public max: number;\n\n    constructor(min: number, max: number) {\n        this.min = min;\n        this.max = max;\n    }\n\n    public length(): number {\n        return this.max - this.min;\n    }\n\n    public offset(diff: number): Range {\n        this.min += diff;\n        this.max += diff;\n        return this;\n    }\n\n    public step() {\n        return this.offset(this.length());\n    }\n\n    public center(): number {\n        return (this.min + this.max) / 2;\n    }\n\n    public copy(): Range {\n        return new Range(this.min, this.max);\n    }\n\n    public between(val: number): boolean {\n        return val >= this.min && val < this.max;\n    }\n\n    public inflate(val: number): Range {\n        this.min -= val;\n        this.max += val;\n        return this;\n    }\n\n    public deflate(val: number): Range {\n        return this.inflate(-val);\n    }\n\n    public makeInside(val: number): number {\n        return Math.min(Math.max(val, this.min), this.max);\n    }\n\n    public normalize(val: number): number {\n        return (val - this.min) / this.length();\n    }\n\n    public static byStep(start: number, step: number) {\n        return new Range(start, start + step);\n    }\n\n}\n\n","import {Dir, generateMaze, MazeNode} from \"./maze\";\nimport {drawMaze} from \"./mazedraw\";\nimport {Point, Range, TWO_PI} from \"./util\";\nimport \"./volumaze.css\";\n\nconst canvas = <HTMLCanvasElement> document.getElementById(\"maze\");\nconst maze = generateMaze(24, 24, new Range(30, Math.min(canvas.width, canvas.height) / 2));\n\nconst keyMask: { [k: string]: boolean } = {};\nconst playerRadius = 5;\n\nlet currentNode: MazeNode = maze.rings[0][0];\n\nconst playerPosition = new Point(currentNode.angle.center(), currentNode.radius.center());\n\nconst audio = <HTMLAudioElement> document.getElementById(\"audio\");\naudio.volume = 0;\n\nfunction capitalize(str: string): string {\n    return str.length > 0 ? str.substring(0, 1).toUpperCase() + str.substring(1) : str;\n}\n\nwindow.onkeydown = function(e) {\n    audio.play();\n    keyMask[e.key] = true;\n};\nwindow.onkeyup = function(e) {\n    delete keyMask[e.key];\n};\n\n[\"up\", \"down\", \"left\", \"right\"].forEach(k => {\n    const btn: HTMLButtonElement = <HTMLButtonElement> document.getElementById(\"key-\" + k);\n    btn.ontouchstart = btn.onmousedown = function() {\n        audio.play();\n        keyMask[\"Arrow\" + capitalize(k)] = true;\n    };\n    btn.ontouchend = btn.onmouseleave = btn.onmouseup = function() {\n        keyMask[\"Arrow\" + capitalize(k)] = false;\n    };\n});\n\n\nfunction onFrame() {\n    requestAnimationFrame(onFrame);\n    render();\n}\n\nfunction process() {\n    const speed = 1;\n    const p = new Point(\n        (keyMask[\"ArrowRight\"] ? 1 : keyMask[\"ArrowLeft\"] ? -1 : 0),\n        (keyMask[\"ArrowUp\"] ? 1 : keyMask[\"ArrowDown\"] ? -1 : 0)\n    ).normalize().mul(speed).div([playerPosition.y > 0 ? playerPosition.y : 1, 1]);\n\n    playerPosition.add(p);\n\n    const playerRadiusRange = maze.radius.copy().deflate(playerRadius);\n    playerPosition.y = playerRadiusRange.makeInside(playerPosition.y);\n\n    const playerAngleDiff = Math.acos(1 - (playerRadius*playerRadius) / (2 * playerPosition.y * playerPosition.y));\n\n    const rightLink = currentNode.getFirstLinkAt(Dir.RIGHT);\n    const leftLink = currentNode.getFirstLinkAt(Dir.LEFT);\n    if (rightLink && rightLink.info.wall && playerPosition.x + playerAngleDiff >= currentNode.angle.max) {\n        playerPosition.x = currentNode.angle.max - playerAngleDiff;\n    } else if (leftLink && leftLink.info.wall && playerPosition.x - playerAngleDiff < currentNode.angle.min) {\n        playerPosition.x = currentNode.angle.min + playerAngleDiff;\n    }\n\n    if (playerPosition.x >= currentNode.angle.max && rightLink) {\n        currentNode = rightLink.to;\n    } else if (playerPosition.x < currentNode.angle.min && leftLink) {\n        currentNode = leftLink.to;\n    }\n\n    const upLink = (currentNode.directions[Dir.UP] || []).filter(link => link.to.angle.between(playerPosition.x))[0];\n    const downLink = currentNode.getFirstLinkAt(Dir.DOWN);\n    if (upLink && upLink.info.wall && playerPosition.y + playerRadius >= currentNode.radius.max) {\n        playerPosition.y = currentNode.radius.max - playerRadius;\n    } else if (downLink && downLink.info.wall && playerPosition.y - playerRadius < currentNode.radius.min) {\n        playerPosition.y = currentNode.radius.min + playerRadius;\n    }\n\n    if (playerPosition.y >= currentNode.radius.max && upLink) {\n        currentNode = upLink.to;\n    } else if (playerPosition.y < currentNode.radius.min && downLink) {\n        currentNode = downLink.to;\n    }\n\n    // After all checks normalizing angle (0..2PI)\n    playerPosition.x = (playerPosition.x + TWO_PI) % TWO_PI;\n    audio.volume = playerRadiusRange.normalize(playerPosition.y);\n\n}\n\nfunction render() {\n    const element = <HTMLCanvasElement> document.getElementById(\"maze\");\n    const ctx = element.getContext(\"2d\");\n    if (!ctx) {\n        return;\n    }\n    drawFrame(ctx, new Point(element.width, element.height));\n}\n\nfunction drawFrame(ctx: CanvasRenderingContext2D, dim: Point) {\n    ctx.clearRect(0, 0, dim.x, dim.y);\n    const center = dim.copy().center();\n    drawMaze(ctx, maze, center);\n\n    /*\n    ctx.beginPath();\n    ctx.strokeStyle = \"#00ff00\";\n    ctx.fillStyle = \"#00ff00\";\n\n    ctx.moveTo(Math.cos(currentNode.angle.min) * currentNode.radius.max + center.x, Math.sin(currentNode.angle.min) * currentNode.radius.max + center.y);\n    ctx.lineTo(Math.cos(currentNode.angle.min) * currentNode.radius.min + center.x, Math.sin(currentNode.angle.min) * currentNode.radius.min + center.y);\n    ctx.arc(center.x, center.y, currentNode.radius.min, currentNode.angle.min, currentNode.angle.max);\n\n    ctx.moveTo(Math.cos(currentNode.angle.max) * currentNode.radius.max + center.x, Math.sin(currentNode.angle.max) * currentNode.radius.max + center.y);\n    ctx.lineTo(Math.cos(currentNode.angle.max) * currentNode.radius.min + center.x, Math.sin(currentNode.angle.max) * currentNode.radius.min + center.y);\n\n    ctx.arc(center.x, center.y, currentNode.radius.max, currentNode.angle.min, currentNode.angle.max);\n    ctx.closePath();\n    ctx.fill();\n    */\n\n    drawPlayer(ctx, center, playerPosition);\n}\n\nfunction drawPlayer(ctx: CanvasRenderingContext2D, center: Point, position: Point) {\n    /*\n    ctx.strokeStyle = \"black\";\n    ctx.font = \"15px normal sans-serif\";\n    ctx.strokeText(\"Position: \" + position.x.toFixed(2) + \"; \" + position.y.toFixed(2) + \"; Volume: \" + audio.volume.toFixed(2), 0, 20);\n    */\n\n    ctx.beginPath();\n    const pos = center.copy().add(position.copy().polar());\n    ctx.fillStyle = \"#ff0000\";\n    ctx.arc(pos.x, pos.y, 5, 0, 2*Math.PI);\n    ctx.fill();\n}\n\n\n// processing at 30fps\nconst fixedFps = 60;\nconst processTime = 1000 / fixedFps;\nsetInterval(process, processTime);\nrequestAnimationFrame(onFrame);\n","import {backtraceCarve} from \"./mazegen\";\nimport {Range, TWO_PI} from \"./util\";\n\nexport const enum Dir {\n    LEFT,\n    RIGHT,\n    UP,\n    DOWN\n}\n\nexport function oppositeDirection(direction: Dir): Dir {\n    return (direction + 1) % 2 + Math.floor(direction / 2) * 2;\n}\n\nexport type DirectionMap = { [k: number]: Array<MazeLink> };\n\nexport interface MazeLinkInfo {\n    wall: boolean;\n}\n\nexport interface MazeLink {\n    info: MazeLinkInfo;\n    to: MazeNode;\n}\n\nexport interface CircleMaze {\n    rings: Array<Array<MazeNode>>;\n    radius: Range;\n}\n\nexport class MazeNode {\n    public visited: boolean = false;\n    public directions: DirectionMap = {};\n    public radius: Range;\n    public angle: Range;\n\n    public constructor(radius: Range, angle: Range) {\n        this.radius = radius;\n        this.angle = angle;\n    }\n\n    public linkTo(dir: number, node?: MazeNode): MazeNode {\n        if (!node) {\n            return this;\n        }\n\n        const info: MazeLinkInfo = { wall: true };\n        this.getLinksTo(dir).push({info, to: node});\n        node.getLinksTo(oppositeDirection(dir)).push({info, to: this});\n        return this;\n    }\n\n    public getLinksTo(k: number): Array<MazeLink> {\n        if (!this.directions[k]) {\n            this.directions[k] = [];\n        }\n        return this.directions[k];\n    }\n\n    public getFirstLinkAt(k: number): MazeLink | undefined {\n        const l = this.directions[k];\n        return l && l.length ? l[0] : undefined;\n    }\n\n    public getFirstNodeAt(dir: number): MazeNode | undefined {\n        const l = this.getFirstLinkAt(dir);\n        return l ? l.to : undefined;\n    }\n}\n\nexport function makeMazeRing(segmentCount: number, subdivisions: number, radius: Range, parent?: MazeNode): Array<MazeNode> {\n    const segments: Array<MazeNode> = [];\n\n    const angle = new Range(0, 2 * Math.PI / segmentCount);\n    for (let i = 0; i < segmentCount; i++) {\n        if (parent && i > 0 && i % subdivisions === 0) {\n            parent = parent.getFirstNodeAt(Dir.RIGHT);\n        }\n\n        segments.push(new MazeNode(radius.copy(), angle.copy())\n            .linkTo(Dir.DOWN, parent)\n            .linkTo(Dir.LEFT, i > 0 ? segments[i - 1] : undefined));\n        angle.step();\n    }\n    if (segments.length > 0) {\n        segments[0].linkTo(Dir.LEFT, segments[segmentCount - 1]);\n    }\n    return segments;\n}\n\nexport function makeMazeRings(ringCount: number, maxSegmentArc: number, radius: Range): CircleMaze {\n    const rings: Array<Array<MazeNode>> = [];\n\n    const radiusRange = Range.byStep(radius.min, radius.length() / ringCount);\n\n    let segmentCount = Math.ceil(TWO_PI * radiusRange.max / maxSegmentArc / 4) * 4;\n    for (let i = 0; i < ringCount; i++) {\n        let ringSubdivisions = 1;\n\n        let segmentArc = TWO_PI * radiusRange.max / segmentCount;\n        if (segmentArc > maxSegmentArc) {\n            segmentCount *= 2;\n            ringSubdivisions = 2;\n        }\n\n        rings.push(makeMazeRing(segmentCount, ringSubdivisions, radiusRange, i > 0 ? rings[i - 1][0] : undefined));\n        radiusRange.step();\n    }\n    return { rings, radius };\n}\n\nexport function generateMaze(ringCount: number, maxSegmentArc: number, radius: Range): CircleMaze {\n    const maze = makeMazeRings(ringCount, maxSegmentArc, radius);\n    backtraceCarve([maze.rings[0][0]]);\n    return maze;\n}\n\n","\nimport {MazeNode} from \"./maze\";\n\nexport function backtraceCarve(stack: Array<MazeNode>) {\n    while (stack.length > 0) {\n        const n = stack[stack.length - 1];\n        n.visited = true;\n\n        const dirs = Object.keys(n.directions).flatMap(k => n.directions[k as any]).filter(dir => !dir.to.visited);\n        if (dirs.length === 0) {\n            stack.pop();\n            continue;\n        }\n\n        const chosenDirection = dirs[Math.floor(Math.random() * dirs.length)];\n        chosenDirection.info.wall = false;\n        stack.push(chosenDirection.to);\n    }\n}\n","import {CircleMaze, Dir, MazeNode} from \"./maze\";\nimport {Point} from \"./util\";\n\nexport function drawMaze(ctx: CanvasRenderingContext2D, maze: CircleMaze, center: Point) {\n    ctx.beginPath();\n    ctx.strokeStyle = \"black\";\n    ctx.arc(center.x, center.y, maze.radius.min, 0, 2*Math.PI);\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.strokeStyle = \"black\";\n    ctx.arc(center.x, center.y, maze.radius.max, 0, 2*Math.PI);\n    ctx.stroke();\n\n    maze.rings.flatMap(r => r).forEach(node => drawMazeNode(ctx, node, center));\n}\n\nfunction drawMazeNode(ctx: CanvasRenderingContext2D, n: MazeNode, center: Point) {\n    const rw = n.getFirstLinkAt(Dir.RIGHT);\n    const bw = n.getFirstLinkAt(Dir.DOWN);\n    //drawMazeWall(ctx, center, n, \"#00ff00\", \"#00ff00\");\n    drawMazeWall(ctx, center, n, rw && rw.info.wall ? \"black\" : \"\", bw && bw.info.wall ? \"black\" : \"\");\n}\n\nfunction drawMazeWall(ctx: CanvasRenderingContext2D, center: Point, n: MazeNode, styleRight: string, styleDown: string) {\n    if (styleRight) {\n        const pc = new Point(Math.cos(n.angle.max), Math.sin(n.angle.max));\n        const p1 = center.copy().add(pc.copy().mul(n.radius.min));\n        const p2 = center.copy().add(pc.copy().mul(n.radius.max));\n        ctx.beginPath();\n        ctx.strokeStyle = styleRight;\n        ctx.moveTo(p1.x, p1.y);\n        ctx.lineTo(p2.x, p2.y);\n        ctx.stroke();\n    }\n    if (styleDown) {\n        ctx.beginPath();\n        ctx.strokeStyle = styleDown;\n        ctx.arc(center.x, center.y, n.radius.min, n.angle.min, n.angle.max);\n        ctx.stroke();\n    }\n}\n"],"sourceRoot":""}